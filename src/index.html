<!doctype html> 
<html lang="en"> 
<head> 
	<meta charset="UTF-8" />
	<title>Block Breakers</title>
  	<script type="text/javascript" src="js/phaser.min.js"></script>
  	<script src="js/blockBreakers.js"></script>
    <style>
      body {
        background: #202028;
        color: #fff;
        font-family: sans-serif;
        font-size: 2em;
        text-align: center;
      }
      canvas {
        padding: 0;
        margin: auto;
        display: block;
        position: absolute;
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
      }
    </style>
</head>
<body>

<div id="game_canvas"></div>
<script type="text/javascript">

var game = new Phaser.Game(480, 800, Phaser.CANVAS, 'game_canvas', { preload: preload, create: create, update: update, render: render });

const colors = [
    null,
    '#FF0D72',
    '#0DC2FF',
    '#0DFF72',
    '#F538FF',
    '#FF8E0D',
    '#FFE138',
    '#3877FF',
];

var block;

var arena = {
  w: 12,
  h: 20,
  matrix: [], 

  createMatrix: function() {
    for(let i = 0; i < this.h; i++){
      this.matrix.push(new Array(this.w).fill(0));
    }
  }
}

var player = {
      pos: {x: 0, y: 0},
      matrix: null,
}

var renderer = {
  drawMatrix: function(matrix) {
    for(let y = 0; y < matrix.length; y++) {
      for(let x = 0; x < matrix[1].length; x++) {

        block.x=x*40;
        block.y=y*40;

        if(matrix[y][x] !== 0) {
          game.debug.geom(block, colors[matrix[y][x]]);
        }
        else {
          game.debug.geom(block, colors[3]);
        }
      } 
    }
  }
}

function preload() {
}

function create() {  
    block = new Phaser.Rectangle(0,0, 40, 40);
    player.matrix = [
            [0, 7, 0],
            [7, 7, 7],
            [0, 0, 0],
      ];
      arena.createMatrix();
}

function update() {

}

function render () {
  renderer.drawMatrix(arena.matrix);
  renderer.drawMatrix(player.matrix);
  

  /*DEBBUGING
  var x = 32;
  var y = 0;
  var yi = 32;
  game.debug.text('Arena', x, y += yi);
  game.debug.text('Alto: ' + arena.matrix.length, x, y += yi);
  game.debug.text('Ancho: ' + arena.matrix[0].length, x, y += yi);*/
}



</script>

</body>
</html>